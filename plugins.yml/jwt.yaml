plugins:
  # JWT para rutas protegidas de api-main (excluye /auth y /public)
  - name: jwt
    service: api-main
    route: api-main
    config:
      key_claim_name: iss
      claims_to_verify:
        - exp
      run_on_preflight: false
      header_names:
        - Authorization
      uri_param_names:
        - jwt
      cookie_names:
        - jwt
  # JWT para ruta /sse (excluye /metrics)
  - name: jwt
    service: sse
    route: sse
    config:
      key_claim_name: iss
      claims_to_verify:
        - exp
      run_on_preflight: false
      header_names:
        - Authorization
      uri_param_names:
        - jwt
      cookie_names:
        - jwt
  # JWT para ruta /ws
  - name: jwt
    service: ws
    route: ws
    config:
      key_claim_name: iss
      claims_to_verify:
        - exp
      run_on_preflight: false
      header_names:
        - Authorization
      uri_param_names:
        - jwt
      cookie_names:
        - jwt
  # JWT para ruta /socket.io (Socket.IO)
  - name: jwt
    service: ws
    route: socketio
    config:
      key_claim_name: iss
      claims_to_verify:
        - exp
      run_on_preflight: false
      header_names:
        - Authorization
      uri_param_names:
        - jwt
      cookie_names:
        - jwt